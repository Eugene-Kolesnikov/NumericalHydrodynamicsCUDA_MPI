<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Numerical Hydrodynamics MPI+CUDA Project: DynamicLibraryVisualization/offscreen.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Numerical Hydrodynamics MPI+CUDA Project
   &#160;<span id="projectnumber">0.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('offscreen_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">offscreen.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This file contains the descriptions of the functions which save rendered images to files: ppm, png, mpeg.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="offscreen_8h_source.html">offscreen.h</a>&quot;</code><br />
<code>#include &lt;assert.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;OpenGL/gl3.h&gt;</code><br />
<code>#include &lt;GLFW/glfw3.h&gt;</code><br />
<code>#include &lt;png.h&gt;</code><br />
<code>#include &lt;libavcodec/avcodec.h&gt;</code><br />
<code>#include &lt;libavutil/imgutils.h&gt;</code><br />
<code>#include &lt;libavutil/opt.h&gt;</code><br />
<code>#include &lt;libswscale/swscale.h&gt;</code><br />
</div>
<p><a href="offscreen_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a198b8c2c77ea9f9815a181ddeda1c320"><td class="memItemLeft" align="right" valign="top"><a id="a198b8c2c77ea9f9815a181ddeda1c320"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>Constants</b> { <b>SCREENSHOT_MAX_FILENAME</b> = 256
 }</td></tr>
<tr class="separator:a198b8c2c77ea9f9815a181ddeda1c320"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0c02ed34de92a6bdc7aac86b6c7ebde9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="offscreen_8c.html#a0c02ed34de92a6bdc7aac86b6c7ebde9">screenshot_ppm</a> (const char *filename, unsigned int width, unsigned int height, GLubyte **pixels)</td></tr>
<tr class="memdesc:a0c02ed34de92a6bdc7aac86b6c7ebde9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take a screen-shot with glReadPixels and save to a file in PPM format.  <a href="#a0c02ed34de92a6bdc7aac86b6c7ebde9">More...</a><br /></td></tr>
<tr class="separator:a0c02ed34de92a6bdc7aac86b6c7ebde9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1eeb20bd3aa05c5145ec78ee40b9b8c2"><td class="memItemLeft" align="right" valign="top"><a id="a1eeb20bd3aa05c5145ec78ee40b9b8c2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>screenshot_png</b> (const char *filename, unsigned int width, unsigned int height, GLubyte **pixels, png_byte **png_bytes, png_byte ***png_rows)</td></tr>
<tr class="separator:a1eeb20bd3aa05c5145ec78ee40b9b8c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a866d9934b2d9974a3803b5e5df962276"><td class="memItemLeft" align="right" valign="top"><a id="a866d9934b2d9974a3803b5e5df962276"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ffmpeg_encoder_set_frame_yuv_from_rgb</b> (uint8_t *rgb)</td></tr>
<tr class="separator:a866d9934b2d9974a3803b5e5df962276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03aa92778b7389c393c22457caf9aabc"><td class="memItemLeft" align="right" valign="top"><a id="a03aa92778b7389c393c22457caf9aabc"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ffmpeg_encoder_start</b> (const char *filename, enum AVCodecID codec_id, int fps, int width, int height)</td></tr>
<tr class="separator:a03aa92778b7389c393c22457caf9aabc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee024be99052c47b59cbdf3e2626bb53"><td class="memItemLeft" align="right" valign="top"><a id="aee024be99052c47b59cbdf3e2626bb53"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ffmpeg_encoder_finish</b> (void)</td></tr>
<tr class="separator:aee024be99052c47b59cbdf3e2626bb53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9559b490b7da6c97f796f4825e29a501"><td class="memItemLeft" align="right" valign="top"><a id="a9559b490b7da6c97f796f4825e29a501"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ffmpeg_encoder_encode_frame</b> (uint8_t *rgb)</td></tr>
<tr class="separator:a9559b490b7da6c97f796f4825e29a501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd732da008e2ef1e1ef0c844ab4ca1f"><td class="memItemLeft" align="right" valign="top"><a id="a2dd732da008e2ef1e1ef0c844ab4ca1f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>ffmpeg_encoder_glread_rgb</b> (uint8_t **rgb, GLubyte **pixels, unsigned int width, unsigned int height)</td></tr>
<tr class="separator:a2dd732da008e2ef1e1ef0c844ab4ca1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcf386f3f147c0c8027ceb6a09871947"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="offscreen_8c.html#afcf386f3f147c0c8027ceb6a09871947">set_output_windowsize</a> (unsigned short window_size)</td></tr>
<tr class="memdesc:afcf386f3f147c0c8027ceb6a09871947"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set's up the environment (window size) for the output image or video.  <a href="#afcf386f3f147c0c8027ceb6a09871947">More...</a><br /></td></tr>
<tr class="separator:afcf386f3f147c0c8027ceb6a09871947"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d7d0de603d074b5ef4313c59b92ccb1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="offscreen_8c.html#a1d7d0de603d074b5ef4313c59b92ccb1">init_output</a> (enum <a class="el" href="offscreen_8h.html#a29ac838d689ab5ed87b591138936e615">OUTPUT_OPTION</a> output)</td></tr>
<tr class="memdesc:a1d7d0de603d074b5ef4313c59b92ccb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set's up the environment (output option).  <a href="#a1d7d0de603d074b5ef4313c59b92ccb1">More...</a><br /></td></tr>
<tr class="separator:a1d7d0de603d074b5ef4313c59b92ccb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60768fd2fff7b48e5d7bb2a497279ebe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="offscreen_8c.html#a60768fd2fff7b48e5d7bb2a497279ebe">deinit_output</a> (enum <a class="el" href="offscreen_8h.html#a29ac838d689ab5ed87b591138936e615">OUTPUT_OPTION</a> output)</td></tr>
<tr class="memdesc:a60768fd2fff7b48e5d7bb2a497279ebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinitializes the environment. (Necessary for MPEG option since the encoder has to close the file appropriately).  <a href="#a60768fd2fff7b48e5d7bb2a497279ebe">More...</a><br /></td></tr>
<tr class="separator:a60768fd2fff7b48e5d7bb2a497279ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0972b9037c322bca4750fb66c346dd6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="offscreen_8c.html#a0972b9037c322bca4750fb66c346dd6a">writeframe_output</a> (enum <a class="el" href="offscreen_8h.html#a29ac838d689ab5ed87b591138936e615">OUTPUT_OPTION</a> output)</td></tr>
<tr class="memdesc:a0972b9037c322bca4750fb66c346dd6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Either creates an image or writes a frame to a video file (depending on the output option).  <a href="#a0972b9037c322bca4750fb66c346dd6a">More...</a><br /></td></tr>
<tr class="separator:a0972b9037c322bca4750fb66c346dd6a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the descriptions of the functions which save rendered images to files: ppm, png, mpeg. </p>
<dl class="section author"><dt>Author</dt><dd>Eugene Kolesnikov </dd></dl>
<dl class="section date"><dt>Date</dt><dd>11/10/2017 </dd></dl>

<p class="definition">Definition in file <a class="el" href="offscreen_8c_source.html">offscreen.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a60768fd2fff7b48e5d7bb2a497279ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60768fd2fff7b48e5d7bb2a497279ebe">&#9670;&nbsp;</a></span>deinit_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void deinit_output </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="offscreen_8h.html#a29ac838d689ab5ed87b591138936e615">OUTPUT_OPTION</a>&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinitializes the environment. (Necessary for MPEG option since the encoder has to close the file appropriately). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output</td><td>&ndash; type of an output. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="offscreen_8c_source.html#l00262">262</a> of file <a class="el" href="offscreen_8c_source.html">offscreen.c</a>.</p>

</div>
</div>
<a id="a1d7d0de603d074b5ef4313c59b92ccb1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d7d0de603d074b5ef4313c59b92ccb1">&#9670;&nbsp;</a></span>init_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void init_output </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="offscreen_8h.html#a29ac838d689ab5ed87b591138936e615">OUTPUT_OPTION</a>&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set's up the environment (output option). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output</td><td>&ndash; type of an output. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="offscreen_8c_source.html#l00249">249</a> of file <a class="el" href="offscreen_8c_source.html">offscreen.c</a>.</p>

</div>
</div>
<a id="a0c02ed34de92a6bdc7aac86b6c7ebde9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c02ed34de92a6bdc7aac86b6c7ebde9">&#9670;&nbsp;</a></span>screenshot_ppm()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void screenshot_ppm </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>height</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">GLubyte **&#160;</td>
          <td class="paramname"><em>pixels</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take a screen-shot with glReadPixels and save to a file in PPM format. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>&ndash; file path to save to, without extension. </td></tr>
    <tr><td class="paramname">width</td><td>&ndash; screen width in pixels </td></tr>
    <tr><td class="paramname">height</td><td>&ndash; screen height in pixels </td></tr>
    <tr><td class="paramname">pixels</td><td>&ndash; intermediate buffer to avoid repeated mallocs across multiple calls. Contents of this buffer do not matter. May be NULL, in which case it is initialized. The memory of the buffer must be freed if the function won't be called anymore. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="offscreen_8c_source.html#l00046">46</a> of file <a class="el" href="offscreen_8c_source.html">offscreen.c</a>.</p>

</div>
</div>
<a id="afcf386f3f147c0c8027ceb6a09871947"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcf386f3f147c0c8027ceb6a09871947">&#9670;&nbsp;</a></span>set_output_windowsize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_output_windowsize </td>
          <td>(</td>
          <td class="paramtype">unsigned short&#160;</td>
          <td class="paramname"><em>window_size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set's up the environment (window size) for the output image or video. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">window_size</td><td>&ndash; width and height of the result image or video. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="offscreen_8c_source.html#l00239">239</a> of file <a class="el" href="offscreen_8c_source.html">offscreen.c</a>.</p>

</div>
</div>
<a id="a0972b9037c322bca4750fb66c346dd6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0972b9037c322bca4750fb66c346dd6a">&#9670;&nbsp;</a></span>writeframe_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void writeframe_output </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="offscreen_8h.html#a29ac838d689ab5ed87b591138936e615">OUTPUT_OPTION</a>&#160;</td>
          <td class="paramname"><em>output</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Either creates an image or writes a frame to a video file (depending on the output option). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">output</td><td>&ndash; type of an output. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="offscreen_8c_source.html#l00279">279</a> of file <a class="el" href="offscreen_8c_source.html">offscreen.c</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_f72a841f90b6061925943daaa69b4c6b.html">DynamicLibraryVisualization</a></li><li class="navelem"><a class="el" href="offscreen_8c.html">offscreen.c</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
